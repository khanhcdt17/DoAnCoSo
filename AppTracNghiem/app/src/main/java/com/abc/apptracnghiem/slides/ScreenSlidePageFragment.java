package com.abc.apptracnghiem.slides;import android.graphics.Color;import android.os.Bundle;import android.support.annotation.Nullable;import android.support.v4.app.Fragment;import android.util.Log;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.ImageView;import android.widget.RadioButton;import android.widget.RadioGroup;import android.widget.TextView;import android.widget.Toast;import com.abc.apptracnghiem.Question.Question;import com.abc.apptracnghiem.R;import java.util.ArrayList;/** * A simple {@link Fragment} subclass. */public class ScreenSlidePageFragment extends Fragment {    public static final String ARG_PAGE = "page";    public static final String ARG_CHECK_ANSWER = "check_answer";    //public static final String ARG_CHECK_EXPLAINTION = "check_answer";    private int mPageNumber; // vi tri trang hien tai    public int checkAnswer;//bien kiem tra    //public int checkExplaintion;    ArrayList<Question> questions;    TextView tvNum, tvQuestion, tvExplaintion;    RadioGroup radioGroup;    RadioButton radA, radB, radC, radD;    ImageView imgViewQuestion;    public ScreenSlidePageFragment() {        // Required empty public constructor    }    @Override    public View onCreateView(LayoutInflater inflater, ViewGroup container,                             Bundle savedInstanceState) {        // Inflate the layout for this fragment        ViewGroup rootView = (ViewGroup) inflater.inflate(                R.layout.fragment_screen_slide_page, container, false);        tvNum = rootView.findViewById(R.id.tvNum);        tvQuestion = rootView.findViewById(R.id.tvQuestion);        radA = rootView.findViewById(R.id.radA);        radB = rootView.findViewById(R.id.radB);        radC = rootView.findViewById(R.id.radC);        radD = rootView.findViewById(R.id.radD);        radioGroup = rootView.findViewById(R.id.radGroup);        tvExplaintion = rootView.findViewById(R.id.tvExplaintion);        imgViewQuestion = rootView.findViewById(R.id.ivImgQuestion);        return rootView;    }    @Override    public void onCreate(@Nullable Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        questions = new ArrayList<>();        ScreenSlideActivity screenSlideActivity = (ScreenSlideActivity) getActivity();        questions = screenSlideActivity.getData();        mPageNumber = getArguments().getInt(ARG_PAGE);        checkAnswer = getArguments().getInt((ARG_CHECK_ANSWER));    }    @Override    public void onActivityCreated(@Nullable Bundle savedInstanceState) {        super.onActivityCreated(savedInstanceState);        tvNum.setText("Question " + (mPageNumber + 1));        tvQuestion.setText(questions.get(mPageNumber).getQuestion());        radA.setText("A. " + questions.get(mPageNumber).getAns_a());        radB.setText("B. " + questions.get(mPageNumber).getAns_b());        radC.setText("C. " + questions.get(mPageNumber).getAns_c());        radD.setText("D. " + questions.get(mPageNumber).getAns_d());        if (!questions.get(mPageNumber).getImg().equals("")) {            int imageId = getResources().getIdentifier(questions.get(mPageNumber).getImg(), "drawable", getActivity().getPackageName());            imgViewQuestion.setImageResource(imageId);        }        if (checkAnswer != 0) {            radA.setClickable(false);            radB.setClickable(false);            radC.setClickable(false);            radD.setClickable(false);            getCheckAnswer(getItem(mPageNumber).getResult(), getItem(mPageNumber).getAnswer());            tvExplaintion.setText("Explaintion: " + questions.get(mPageNumber).getExplaintion());            //Log.d("KQ",mPageNumber+"");        }        radioGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {            @Override            public void onCheckedChanged(RadioGroup group, int checkedId) {                questions.get(mPageNumber).choiceId = checkedId;                questions.get(mPageNumber).setAnswer(getChoiceFromID(checkedId));            }        });    }    public static ScreenSlidePageFragment create(int pageNumber, int checkAnswer) {        ScreenSlidePageFragment fragment = new ScreenSlidePageFragment();        Bundle bundle = new Bundle();        bundle.putInt(ARG_PAGE, pageNumber);        bundle.putInt(ARG_CHECK_ANSWER, checkAnswer);        fragment.setArguments(bundle);        return fragment;    }    public Question getItem(int posotion) {        return questions.get(posotion);    }//    // Tìm ID của Image ứng với tên của ảnh (Trong thư mục mipmap).//    public int getMipmapResIdByName(String resName)  {//        String pkgName = context.getPackageName();////        // Trả về 0 nếu không tìm thấy.//        int resID = context.getResources().getIdentifier(resName , "mipmap", pkgName);//        Log.i("CustomGridView", "Res Name: "+ resName+"==> Res ID = "+ resID);//        return resID;//    }    //Lay dap an theo vi tri    private String getChoiceFromID(int id) {        if (id == R.id.radA) return "a";        if (id == R.id.radB) return "b";        if (id == R.id.radC) return "c";        if (id == R.id.radD) return "d";        return "";    }    //ham kiem tra cau dung    private void getCheckAnswer(String result, String ans) {        int correctColor = Color.parseColor("#00cc00");        if (result.equals("a") == true && result.equals(ans) == true) {            radA.setTextColor(correctColor);        } else {            if (result.equals("a") == true) {                radA.setTextColor(Color.RED);            }        }        if (result.equals("b") == true && result.equals(ans) == true) {            radB.setTextColor(correctColor);        } else {            if (result.equals("b") == true) {                radB.setTextColor(Color.RED);            }        }        if (result.equals("c") == true && result.equals(ans) == true) {            radC.setTextColor(correctColor);        } else {            if (result.equals("c") == true) {                radC.setTextColor(Color.RED);            }        }        if (result.equals("d") == true && result.equals(ans) == true) {            radD.setTextColor(correctColor);        } else {            if (result.equals("d") == true){                radD.setTextColor(Color.RED);            }        }    }}